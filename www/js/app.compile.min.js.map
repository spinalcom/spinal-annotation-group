{"version":3,"sources":["../../app/app.js","../../app/app.config.js","../../app/app.route.js","../../app/directives/navbar.js","../../app/services/spinalCore.js","../../app/services/spinalModelDictionary.js","../../app/services/goldenLayoutService.js","../../app/services/authService.js","../../app/controllers/mainCtrl.js","../../app/controllers/navbarCtrl.js","../../app/controllers/forgeViewerCtrl.js","../../app/controllers/loginCtrl.js","../../app/run/plugin-annotation.js"],"names":[],"mappings":"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","file":"app.compile.min.js","sourcesContent":["angular.module('app.route', ['ngRoute']);\nangular.module('app.services', []);\nangular.module('app.directives', []);\nangular.module('app.controllers', []);\nangular.module('app.spinalcom', ['settings', 'ngMaterial']);\nangular.module('app.spinalforge.plugin', []);\n\nangular.module('SpinalApp', ['ngAnimate', 'ngMaterial', 'app.directives', 'app.route',\n    'app.services', 'app.controllers', 'ngMdIcons', 'settings', 'app.spinalcom', 'app.spinalforge.plugin', \"colorpicker.module\"\n  ])\n  .run(['$rootScope', '$location', 'authService', function ($rootScope, $location, authService) {\n    let user = authService.get_user();\n    $rootScope.$on('$routeChangeStart', function (event, next, current) {\n      if (next.$$route.authenticate) {\n        if (!authService.is_Connected()) {\n          authService.login(user.username, user.password)\n            .then(function () {},\n              function () {\n                $location.path('/login');\n              });\n        }\n      }\n    });\n  }])\n\n\n  .config([\"$mdThemingProvider\", function ($mdThemingProvider) {\n    $mdThemingProvider.theme('altTheme')\n      .primaryPalette('grey', {\n        'default': '200'\n      })\n      .accentPalette('grey', {\n        'default': '700'\n      })\n      .dark();\n    $mdThemingProvider.theme('default')\n      .dark();\n\n    $mdThemingProvider.setDefaultTheme('altTheme');\n    $mdThemingProvider.alwaysWatchTheme(true);\n  }]).run([\"$templateCache\", \"$http\", function ($templateCache, $http) {\n    let load_template = (uri, name) => {\n      $http.get(uri).then((response) => {\n        $templateCache.put(name, response.data);\n      }, (errorResponse) => {\n        console.log('Cannot load the file ' + uri);\n      });\n    };\n    let toload = [{\n      uri: 'app/templates/forgeviewer.html',\n      name: 'forgeviewer.html'\n    }];\n    for (var i = 0; i < toload.length; i++) {\n      load_template(toload[i].uri, toload[i].name);\n    }\n\n    // $templateCache.put('templateId.html', 'This is the content of the template');\n  }]);","angular.module('settings', [])\n  .constant('config', {\n    main_path: '/',\n    spinalhub_url: '127.0.0.1',\n    spinalhub_port: '8888',\n    spinalhub_user: '168',\n  });","angular.module('app.route')\n  .config([\"$routeProvider\", \"$locationProvider\",\n    function ($routeProvider, $locationProvider) {\n      $routeProvider\n\n        .when(\"/viewer/:filepath\", {\n          templateUrl: \"app/templates/main.html\",\n          authenticate: true,\n          controller: 'mainCtrl'\n        })\n        .when(\"/login\", {\n          templateUrl: \"app/templates/login.html\",\n          authenticate: false,\n          controller: 'loginCtrl'\n        })\n        .when('/404', {\n          authenticate: false,\n          controller: ['$location', function ($location) {\n            $location.replace('/drive/');\n          }]\n        }).otherwise({\n          redirectTo: '/404'\n        });\n\n      // .otherwise({\n      //   redirectTo: '/viewer'\n      // });\n    }\n  ]);","angular.module('app.directives')\n  .directive(\"navbar\", [\n    function () {\n      return {\n        restrict: 'E',\n        templateUrl: 'app/templates/navbar.html',\n        controller: 'navbarCtrl',\n      };\n    }\n  ])\n  .directive(\"menuGlayout\", ['goldenLayoutService', '$timeout',\n    function (goldenLayoutService, $timeout) {\n      return {\n        restrict: 'E',\n        scope: {\n          layoutInfo: '=info'\n        },\n        replace: true,\n        template: '<li ng-repeat=\\\"layout in layoutInfo\\\"  id=\\\"{{layout.id}}\\\"><a >{{layout.name}}</a></li>',\n        link: (scope, element, attrs) => {\n          goldenLayoutService.wait_ready().then(() => {\n            let create_callback = (goldenLayoutService, layout) => {\n              return () => {\n                goldenLayoutService.createChild(layout.cfg);\n              };\n            };\n            for (var i = 0; i < scope.layoutInfo.length; i++) {\n              let layout = scope.layoutInfo[i];\n              goldenLayoutService.createDragSource($(\"#\" + layout.id)[0], layout.cfg);\n              $(\"#\" + layout.id).click(create_callback(goldenLayoutService, layout));\n            }\n          });\n        }\n      };\n    }\n  ])\n  .directive('ngRightClick', [\"$parse\", function ($parse) {\n    return function (scope, element, attrs) {\n      var fn = $parse(attrs.ngRightClick);\n      element.bind('contextmenu', function (event) {\n        scope.$apply(function () {\n          event.preventDefault();\n          fn(scope, {\n            $event: event\n          });\n        });\n      });\n    };\n  }]);","angular.module('app.spinalcom')\n  .factory('ngSpinalCore', ['$q', function ($q) {\n    var service = {};\n    service.conn = 0;\n\n    service.connect = function (option) {\n      service.conn = spinalCore.connect(option);\n    };\n    service.store = function (model, path) {\n      var deferred = $q.defer();\n      spinalCore.store(service.conn, model, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load = function (path) {\n      var deferred = $q.defer();\n      spinalCore.load(service.conn, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load_type = function (model, path) {\n      var deferred = $q.defer();\n      spinalCore.load_type(service.conn, model, path, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.load_right = function (ptr) {\n      var deferred = $q.defer();\n      spinalCore.load_right(service.conn, ptr, function (model) {\n        deferred.resolve(model);\n      }, function () {\n        deferred.reject();\n      });\n      return deferred.promise;\n    };\n    service.share_model = function (data, filename, flag, target_username) {\n      return spinalCore.share_model(service.conn, data, filename, flag, target_username);\n    };\n    return service;\n  }]);","angular.module('app.spinalcom')\n  .factory('spinalModelDictionary', [\"$q\", \"ngSpinalCore\", \"config\", \"authService\", \"$routeParams\", \"$location\",\n    function ($q, ngSpinalCore, config, authService, $routeParams, $location) {\n      let factory = {};\n      factory.model = 0;\n      factory.init = () => {\n        var deferred = $q.defer();\n        if (factory.model == 0) {\n          authService.wait_connect().then(() => {\n            let user = authService.get_user();\n            let path = $routeParams.filepath;\n            console.log(path)\n            if (path) {\n              path = atob(path);\n              ngSpinalCore.load(path).then((m) => {\n                factory.model = m;\n                console.log(m);\n                deferred.resolve(m);\n\n              }, () => {\n                let msg = \"not able to load : \" + path;\n                console.error(msg);\n                $location.replace('/drive/');\n                deferred.reject(msg);\n              });\n            }\n          }, () => {\n            let msg = \"not able to load : \" + path;\n            console.error(msg);\n            $location.replace('/drive/');\n            deferred.reject(msg);\n          });\n        } else\n          deferred.resolve(factory.model);\n        return deferred.promise;\n      };\n      return factory;\n    }\n  ]);","angular.module('app.services')\n  .factory('goldenLayoutService', ['$q', '$window', '$templateCache', '$rootScope', '$compile',\n    function ($q, $window, $templateCache, $rootScope, $compile) {\n      var config = {\n        content: [{\n          type: 'row',\n          content: [{\n            isClosable: false,\n            title: \"Viewer\",\n            type: 'component',\n            componentName: 'SpinalHome',\n            componentState: {\n              template: 'forgeviewer.html',\n              controller: 'forgeViewerCtrl'\n            }\n          }]\n        }]\n      };\n      let myLayout = 0;\n      let factory = {};\n      factory.init = () => {\n        if (myLayout == 0) {\n          myLayout = new GoldenLayout(config, $(\"#g-layout\"));\n          myLayout.registerComponent('SpinalHome', function (container, state) {\n            var element = container.getElement();\n            if (state.template == '') {\n\n              element.html();\n              $compile(element.contents())($rootScope);\n            } else {\n              element.html(\"<div class=\\\"gpannel-content\\\" ng-controller=\\\"\" + state.controller + \"\\\" ng-cloak>\" +\n                $templateCache.get(state.template) + \"</div>\");\n              $compile(element.contents())($rootScope);\n            }\n          });\n\n          myLayout.init();\n          angular.element($window).bind('resize', function () {\n            myLayout.updateSize();\n          });\n          $rootScope.$emit(\"GoldenLayout_READY\");\n        }\n      };\n\n      factory.wait_ready = () => {\n        return $q(function (resolve, reject) {\n          $rootScope.$on(\"GoldenLayout_READY\", () => {\n            resolve();\n          });\n        });\n      };\n\n\n\n      factory.createChild = (config) => {\n        myLayout.root.contentItems[0].addChild(config);\n      };\n\n      factory.createDragSource = (element, config) => {\n        myLayout.createDragSource(element, config);\n\n      };\n\n\n      return factory;\n    }\n  ])\n  .factory('layout_uid', function () {\n    let uid = 0;\n    return ({\n      get: () => {\n        let id = uid++;\n        return id;\n      }\n    });\n  });","angular.module('app.spinalcom')\n  .factory('authService', [\"$q\", \"ngSpinalCore\", \"config\", \"$http\",\n    function ($q, ngSpinalCore, config, $http) {\n      let factory = {};\n      let user = {\n        username: \"\",\n        password: \"\",\n        id : \"\"\n      };\n      let is_Connected = false;\n      factory.save_user = (username, password, id) => {\n        user.username = username;\n        user.password = password;\n        user.id = id;\n        window.localStorage.setItem(\"spinalhome_cfg\", btoa(JSON.stringify(user)));\n      };\n      factory.get_user = () => {\n        let _user = window.localStorage.getItem(\"spinalhome_cfg\");\n        if (_user) {\n          user = JSON.parse(atob(_user));\n        }\n        return user;\n      };\n\n      factory.logout = (username, password) => {\n        if (user.username != \"\") {\n          factory.save_user(\"\", \"\",\"\");\n          location.reload();\n        }\n      };\n\n      factory.login = (username, password) => {\n        let deferred = $q.defer();\n        let url = \"/get_user_id\";\n        $http.get(url + \"?u=\" + username + \"&p=\" + password)\n          .then(function (data) {\n            var u = parseInt(data.data);\n            var i = 0;\n            if (u == -1) {\n              let msg = (\"Login Error: username / password pair not found.\");\n              // $mdToast.show(loginError_toast)\n              deferred.reject(msg);\n              for (i = 0; i < wait_connectList.length; i++) {\n                wait_connectList[i].reject();\n              }\n              wait_connectList = [];\n              return;\n            }\n            ngSpinalCore.connect(\"http://\" + u + \":\" + password +\n              \"@\" + config.spinalhub_url + \":\" + config.spinalhub_port + \"/\");\n            factory.save_user(username, password,u);\n            is_Connected = true;\n            deferred.resolve();\n            for (i = 0; i < wait_connectList.length; i++) {\n              wait_connectList[i].resolve();\n            }\n            wait_connectList = [];\n          }, function (data) {\n            let msg = ('Connection Error: Imposible to connect to the server.');\n            // $mdToast.show(connectionError_toast)\n            deferred.reject(msg);\n            for (var i = 0; i < wait_connectList.length; i++) {\n              wait_connectList[i].reject();\n            }\n            wait_connectList = [];\n          });\n        return deferred.promise;\n      };\n\n      factory.is_Connected = () => {\n        return is_Connected;\n      };\n      let wait_connectList = [];\n      factory.wait_connect = () => {\n        let deferred = $q.defer();\n        if (is_Connected == true) {\n          deferred.resolve();\n        } else\n          wait_connectList.push(deferred);\n        return deferred.promise;\n      };\n\n      return factory;\n    }\n  ]);","angular.module('app.controllers')\n  .controller('mainCtrl', [\"$scope\", \"$routeParams\", \"goldenLayoutService\", \"spinalModelDictionary\",\n    function ($scope, $routeParams, goldenLayoutService, spinalModelDictionary) {\n      goldenLayoutService.init();\n    }\n  ]);","angular.module('app.controllers')\n  .controller('navbarCtrl', [\"$scope\", \"authService\", \"$location\", \"$routeParams\",\n    function ($scope, authService, $location, $routeParams) {\n      $scope.username = \"\";\n      $scope.connected = false;\n      authService.wait_connect().then(() => {\n        $scope.username = authService.get_user().username;\n        $scope.connected = true;\n        $scope.viewer = $routeParams.filepath;\n        if ($scope.viewer) {\n          $scope.viewer = atob($scope.viewer);\n        } else {\n          $scope.viewer = \"viewer\";\n        }\n        console.log($routeParams.filepath);\n\n      });\n      $scope.logout = () => {\n        $location.path('/login');\n      };\n      // get in SpinalDrive_Env\n      $scope.layouts = [\n\n        {\n          id: \"drag-viewer\",\n          name: \"viewer\",\n          cfg: {\n            isClosable: true,\n            title: \"viewer\",\n            type: 'component',\n            componentName: 'SpinalHome',\n            componentState: {\n              template: 'forgeviewer.html',\n              controller: 'forgeViewerCtrl'\n            }\n          }\n        },\n\n\n      ];\n\n\n\n\n\n    }\n  ]);","angular.module('app.spinalforge.plugin')\n  .controller('forgeViewerCtrl', [\"$scope\", \"$rootScope\", \"$mdDialog\", \"authService\", \"$compile\", \"$injector\", \"layout_uid\", \"spinalModelDictionary\",\n    function ($scope, $rootScope, $mdDialog, authService, $compile, $injector, layout_uid, spinalModelDictionary) {\n      $scope.injector = $injector;\n      $scope.uid = layout_uid.get();\n      console.log(\"forgeviewerCtrl start\")\n\n      $rootScope.allNotes = []\n      // load etc..\n      $rootScope.allNotes = [\n        {\n          title: new Str(\"test1\"),\n        },\n        {\n          title: new Str(\"test1\"),\n        },\n        {\n          title: new Str(\"test1\"),\n        },\n        {\n          title: new Str(\"test1\"),\n        },\n            ]\n\n\n      spinalModelDictionary.init().then(function (ForgeFile) {\n        var viewerApp, viewables, indexViewable;\n        console.log(\"forgeviewerCtrl start 2\")\n\n        var config3d = {\n          extensions: ['PannelAnnotation', \"Autodesk.ADN.Viewing.Extension.Color\"]\n        };\n        var options = {\n          env: 'AutodeskProduction',\n          accessToken: ''\n        };\n\n\n        var documentId = 'urn:' + ForgeFile.urn.get();\n        get_oAuthToken(ForgeFile, documentId, init_autodesk);\n\n        function get_oAuthToken(forgeFile, documentId, callback) {\n          forgeFile.oauth.set(\"\");\n          forgeFile.ask_token.set(true);\n          var ask_for_token = true;\n          var oauth_onchange = function () {\n            if (ask_for_token && forgeFile.oauth.get() != \"\") {\n              ask_for_token = false;\n              forgeFile.oauth.unbind(oauth_onchange);\n              options.accessToken = forgeFile.oauth.get();\n              callback(documentId);\n            }\n          };\n          forgeFile.oauth.bind(oauth_onchange);\n        }\n\n        function init_autodesk(documentId) {\n          Autodesk.Viewing.Initializer(options, function onInitialized() {\n            viewerApp = new Autodesk.Viewing.ViewingApplication('MyViewerDiv' + $scope.uid);\n            viewerApp.registerViewer(viewerApp.k3D, Autodesk.Viewing.Private.GuiViewer3D, config3d);\n            viewerApp.loadDocument(documentId, onDocumentLoadSuccess, onDocumentLoadFailure);\n          });\n        }\n\n\n        function onDocumentLoadSuccess(doc) {\n          viewables = viewerApp.bubble.search({\n            'type': 'geometry',\n            'role': '3d'\n          });\n          if (viewables.length === 0) {\n            console.error('Document contains no viewables.');\n            return;\n          }\n          viewerApp.selectItem(viewables[viewables.length - 1].data, onItemLoadSuccess, onItemLoadFail);\n        }\n\n\n        function onDocumentLoadFailure(viewerErrorCode) {\n          console.error('onDocumentLoadFailure() - errorCode:' + viewerErrorCode);\n        }\n\n\n        function onItemLoadSuccess(viewer, item) {\n          viewer.scope = $scope;\n          console.log('Viewers are equal: ' + (viewer === viewerApp.getCurrentViewer()));\n        }\n\n\n        function onItemLoadFail(errorCode) {\n          console.error('onItemLoadFail() - errorCode:' + errorCode);\n        }\n\n      });\n\n\n    }\n  ]);","angular.module('app.controllers')\n  .controller('loginCtrl', [\"$scope\", \"authService\", \"$mdToast\", \"$location\",\n    function ($scope, authService, $mdToast, $location) {\n      let toast = $mdToast.simple()\n        .hideDelay(3000);\n      let user = authService.get_user();\n      authService.logout();\n      $scope.conf = {\n        email: \"\",\n        password: \"\"\n      };\n      $scope.ConnectBtn = () => {\n        authService.login($scope.conf.email, $scope.conf.password).then(\n          () => {\n            $location.path('/home');\n          },\n          (err) => {\n            toast.textContent(err);\n            $mdToast.show(toast);\n          }\n        );\n      };\n\n    }\n  ]);","\nangular.module('app.spinalforge.plugin').run([\"spinalModelDictionary\", \"$mdDialog\", \"$mdToast\", \"authService\",\"$rootScope\",\"$compile\",\n  function (spinalModelDictionary, $mdDialog,$mdToast, authService,$rootScope,$compile) {\n\n    class PannelAnnotation {\n      constructor(viewer, options) {\n        Autodesk.Viewing.Extension.call(this, viewer, options);\n\n        this.viewer = viewer;\n        this.panel = null;\n        this.user = authService.get_user();\n\n        $rootScope.exec_function = (name,params = null) => {\n          switch (name) {\n            case \"createTheme\":\n              this.createTheme();\n              break;\n            case \"addNote\":\n              this.createNote(params);\n              break;\n          }\n        }\n\n      }\n\n      load() {\n        if (this.viewer.toolbar) {\n          this.createUI();\n        } else {\n          this.onToolbarCreatedBinded = this.onToolbarCreated.bind(this);\n          this.viewer.addEventListener(av.TOOLBAR_CREATED_EVENT, this.onToolbarCreatedBinded);\n        }\n        return true;\n      }\n\n      onToolbarCreated() {\n        this.viewer.removeEventListener(av.TOOLBAR_CREATED_EVENT, this.onToolbarCreatedBinded);\n        this.onToolbarCreatedBinded = null;\n        this.createUI();\n      }\n\n      unload() {\n        this.viewer.toolbar.removeControl(this.subToolbar);\n        return true;\n      }\n\n      createUI() {\n        var title = 'Annotation';\n        this.panel = new PanelClass(this.viewer, title);\n\n        this.initialize();\n\n        var button1 = new Autodesk.Viewing.UI.Button('Annotation');\n\n        button1.onClick = (e) => {\n          if (!this.panel.isVisible()) {\n            this.panel.setVisible(true);\n          } else {\n            this.panel.setVisible(false);\n          }\n        };\n\n        button1.addClass('fa');\n        button1.addClass('fa-pencil');\n        button1.addClass('fa-2x');\n        button1.setToolTip('Annotation');\n\n        this.subToolbar = new Autodesk.Viewing.UI.ControlGroup('my-Annotation');\n        this.subToolbar.addControl(button1);\n        this.viewer.toolbar.addControl(this.subToolbar);\n      }\n\n      initialize() {\n\n\n        this.panel.initializeMoveHandlers(this.panel.container);\n        // this.panel.container.appendChild(this.panel.createScrollContainer());\n        var _container = angular.element(this.panel.container);\n\n        spinalModelDictionary.init().then((m) => {\n          if (m) {\n            if (m.groupAnnotationPlugin) {\n              m.groupAnnotationPlugin.load((mod) => {\n                this.model = mod;\n                this.func_success(this.model,_container);\n              });\n            } else {\n              this.model = new Lst();\n              m.add_attr({\n                groupAnnotationPlugin : new Ptr(this.model)\n              });\n\n              this.func_success(this.model,_container);\n            }\n\n          }\n\n        });\n      }\n\n      displayTheme(parent,container,notes) {\n        \n        var content = angular.element(`<md-list></md-list>`);\n        var div,element;\n\n        if(notes.length > 0) {\n          for (let i = 0; i < notes.length; i++) {\n            element = notes[i];\n            div = angular.element(`\n              <md-list-item>\n                <p>${element.name.get()}</p>\n\n                <md-button class=\"i_btn\" aria-label=\"add_item\" id=${element.id.get()} ng-click=\"exec_function('addNote','${element.id.get()}')\">\n                  <i class=\"fa fa-plus\" aria-hidden=\"true\"></i>\n                </md-button>\n              </md-list-item>\n            `);\n            content.append(div);\n          }\n        } else {\n          content.append('<h1>No note created ! create one</h1>');\n        }\n        var _parent = angular.element(parent);\n        var c = angular.element(content);\n        _parent.append(c);\n        $compile(c)($rootScope);\n\n        container.append(_parent);\n\n      }\n\n      func_success(data,parent) {\n        var container = angular.element('<div class=\"_container\"></div>');\n        var addGroup = angular.element(`<md-button class=\"md-raised md-primary block\" ng-click=\"exec_function('createTheme')\">Create a group</md-button>`);\n\n        var items = document.createElement('div');\n        items.className = \"themes\";\n\n        \n\n        container.append(addGroup)\n        \n        data.bind(() => {\n          items.innerHTML = \"\";\n          this.displayTheme(items,container,data);\n        })\n\n\n        $compile(container)($rootScope);\n        parent.append(container);\n      }\n      \n\n      createTheme() {\n        var notes = this.model;\n        var theme = new ThemeModel();\n\n        theme.id.set(newGUID());\n        theme.creation.set(Date.now());\n        theme.owner.set(this.user.id);\n        theme.username.set(this.user.username);\n\n        var confirm = $mdDialog.prompt()\n          .title('Theme')\n          .placeholder('Please enter the theme')\n          .ariaLabel('New Theme')\n          .clickOutsideToClose(true)\n          .required(true)\n          .ok('create!')\n          .cancel('Cancel')\n        \n          $mdDialog.show(confirm).then((result) => {\n            theme.name.set(result);\n\n            notes.push(theme);\n\n            console.log(this.model)\n\n          },function(){})\n\n      }\n\n      createNote(id){\n        var notes = this.model;\n        var selected;\n\n        for (let i = 0; i < notes.length; i++) {\n          const element = notes[i];\n          if(element.id == id) {\n            selected = element;\n            break;\n          }\n          \n        }\n\n        var noteModel = new NoteModel();\n\n        noteModel.id.set(newGUID());\n        noteModel.owner.set(this.user.id);\n        noteModel.username.set(this.user.username);\n        noteModel.date.set(Date.now());\n        noteModel.color.set(\"#000000\");\n\n        var confirm = $mdDialog.prompt()\n          .title('Note')\n          .placeholder('Note name')\n          .ariaLabel('New Note')\n          .clickOutsideToClose(true)\n          .required(true)\n          .ok('create')\n          .cancel('Cancel')\n        \n        $mdDialog.show(confirm).then((result) => {\n          noteModel.title.set(result);\n\n          selected.listModel.push(noteModel);\n\n        },function(){})\n        \n\n      }\n\n    } // end class\n    \n  Autodesk.Viewing.theExtensionManager.registerExtension('PannelAnnotation', PannelAnnotation);\n  } // end run\n]);"]}